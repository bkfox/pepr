{% load static i18n pepr_ui %}
{% load render_bundle from webpack_loader %}
{% if not standalone %}
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">

        {% render_bundle "vendor" %}
        {% render_bundle "vendor" "css" %}
        {% render_bundle "main" %}
        {% render_bundle "main" "css" %}
        {% block assets %}{% endblock %}

        {% slot view "assets" %}

        <noscript>
            <link href="{% static "pepr/ui/css/noscript.css" %}" rel="stylesheet">
            {% slot view "noscript" %}
        </noscript>
    </head>
    <body>
        <div id="app" @submit="onSubmit" v-on:action="action"
             {% if context %}
             data-context-id="{% url "container-detail" pk=context.pk %}"
             data-subscription-endpoint="{% url "subscription-list" %}"
             {% endif %}>
            <p-modal id="modal" ref="modal" class="remote"></p-modal>

            <nav class="navbar dark mb-3">
                {% block navbar %}
                <a class="navbar-brand" href="#">Pepr</a>

                <b-dropdown right class="float-right" toggle-class="secondary"
                    text="{{ request.identity.name }}">
                    {# TODO: identity API #}
                    <b-dropdown-group id="dropdown-group-1">
                        <template slot="header">
                            <span class="fas fa-user-circle"></span>
                             {% trans "Change Identity" %}
                        </template>
                    {% for identity in request.identities %}
                        <b-dropdown-item-button>
                            {{ identity.name }}
                        </b-dropdown-item-button>
                    {% endfor %}
                        <b-dropdown-item-button>
                            <span class="fas fa-plus"></span>
                            {% trans "Create an identity" %}
                        </b-dropdown-item-button>
                    </b-dropdown-group>
                    <b-dropdown-divider></b-dropdown-divider>
                    <b-dropdown-item-button>{% trans "Disconnect" %}</b-dropdown-item-button>
                </b-dropdown>
                {% endblock %}
            </nav>

            <p-alerts id="alerts" ref="alerts"></p-alerts>

            <main class="container-fluid p-4">
    {% endif %}
                {% block main %}{% endblock %}
    {% if not standalone %}
            </main>
        </div>
    </body>
</html>
{% endif %}

